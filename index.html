<script>
  fetch("csvjson.json")
    .then(res => res.json())
    .then(dados => {

      const input = document.getElementById("busca");
      const resultados = document.getElementById("resultados");

      function render(lista) {
        resultados.innerHTML = "";

        if (!lista || lista.length === 0) {
          resultados.innerHTML =
            '<div class="empty">Nenhum resultado encontrado</div>';
          return;
        }

        lista.forEach(item => {
          resultados.innerHTML += `
            <div class="card">
              ${Object.entries(item).map(
                ([chave, valor]) =>
                  `<strong>${chave}:</strong> ${valor ?? ""}<br>`
              ).join("")}
            </div>
          `;
        });
      }

      // ðŸ”¹ MOSTRA TUDO AO ABRIR
      render(dados);

      input.addEventListener("input", () => {
        const termo = input.value.toLowerCase().trim();

        if (termo === "") {
          render(dados);
          return;
        }

        const filtrados = dados.filter(item =>
          JSON.stringify(item).toLowerCase().includes(termo)
        );

        render(filtrados);
      });

    })
    .catch(err => {
      document.getElementById("resultados").innerHTML =
        "<div class='empty'>Erro ao carregar os dados</div>";
      console.error(err);
    });
</script>



