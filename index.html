<script>
  fetch("csvjson.json")
    .then(response => response.json())
    .then(dados => {

      const input = document.getElementById("busca");
      const resultados = document.getElementById("resultados");

      input.addEventListener("input", () => {
        const termo = input.value.toLowerCase().trim();
        resultados.innerHTML = "";

        if (termo === "") {
          resultados.innerHTML =
            '<div class="empty">Digite algo para iniciar a busca</div>';
          return;
        }

        const filtrados = dados.filter(item => {
          // üî• AQUI EST√Å A CORRE√á√ÉO
          const texto = JSON.stringify(item).toLowerCase();
          return texto.includes(termo);
        });

        if (filtrados.length === 0) {
          resultados.innerHTML =
            '<div class="empty">Nenhum resultado encontrado</div>';
          return;
        }

        filtrados.forEach(item => {
          resultados.innerHTML += `
            <div class="card">
              ${Object.entries(item).map(
                ([chave, valor]) =>
                  `<strong>${chave}:</strong> ${valor ?? ""}<br>`
              ).join("")}
            </div>
          `;
        });
      });

    })
    .catch(err => {
      document.getElementById("resultados").innerHTML =
        "<div class='empty'>Erro ao carregar os dados</div>";
      console.error(err);
    });
</script>


